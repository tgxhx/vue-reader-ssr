webpackJsonp([5],{15:function(t,n,o){"use strict";var e={StorageGetter:function(t){return JSON.parse(localStorage.getItem(t))},StorageSetter:function(t,n){return localStorage.setItem(t,JSON.stringify(n))}};n.a=e},16:function(t,n,o){"use strict";function e(){return new h.a({mode:"history",fallback:!1,scrollBehavior:function(){return{y:0}},routes:[{path:"/",component:function(){return o.e(1).then(o.bind(null,105))}},{path:"/bookdetail/:id",name:"bookdetail",component:function(){return o.e(2).then(o.bind(null,106))}},{path:"/category",name:"category",component:function(){return o.e(3).then(o.bind(null,107))}},{path:"/reader/:id/:chapter?",name:"reader",component:function(){return o.e(0).then(o.bind(null,108))}}]})}function i(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return new Promise(function(o,e){var i={method:n,url:t};C()(i).then(function(t){o(200===t.status?t.data:t)}).catch(function(t){console.error(t),e(t)})})}function c(){var t={index:++I,bar:!1,font_panel:!1,font_icon:!1,bg_color:1,bg_night:!1,fz_size:18,curChapter:1,windowHeight:"",list_panel:!1,curBookDetailId:1,curBookContentId:1,abc:[],bookList:[],bookDetail:{},bookRelative:[],categoryList:[],bookContent:{title:"",content:[],chapterList:[]}};return new b.a.Store({state:t,mutations:g,actions:T})}Object.defineProperty(n,"__esModule",{value:!0});var a=o(1),u=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{attrs:{id:"app"}},[o("router-view",{staticClass:"view"})],1)},f=[],l={},s=l,m=(o(19),o(13)),p=Object(m.a)(s,u,f,!1,null,null,null),_=p.exports,h=o(20);a.default.use(h.a);var d,b=o(14),g=(d={},i(d,"TOGGLE_BAR",function(t){t.bar=!t.bar}),i(d,"SHOW_LIST_PANEL",function(t){t.list_panel=!t.list_panel}),i(d,"SHOW_FONT_PANEL",function(t){t.font_panel=!t.font_panel}),i(d,"FZ_SIZE_ADD",function(t){++t.fz_size>=24&&(t.fz_size=24)}),i(d,"FZ_SIZE_SUB",function(t){--t.fz_size<=14&&(t.fz_size=14)}),i(d,"SWITCH_NIGHT",function(t){t.bg_night=!t.bg_night}),i(d,"PREV_CHAPTER",function(t){if(t.curChapter<=1)return!1;t.curChapter--}),i(d,"NEXT_CHAPTER",function(t,n){if(t.curChapter>=n)return!1;t.curChapter++}),i(d,"CHOOSE_BOOK",function(t,n){t.curBookDetailId=n}),i(d,"SHOW_BOOK_DETAIL",function(t,n){t.bookDetail=n}),i(d,"CUR_CHAPTER",function(t,n){t.curChapter=n}),i(d,"setBooklist",function(t,n){t.bookList=n}),i(d,"setBookDetail",function(t,n){t.bookDetail=n}),i(d,"setBookRelative",function(t,n){t.bookRelative=n}),i(d,"setBookCategory",function(t,n){t.categoryList=n}),i(d,"setBookContent",function(t,n){t.bookContent=Object.assign({},t.bookContent,n)}),d),k=o(4),C=o.n(k),v=o(5),S=function(){return r(v.a+"/booklist")},B=function(t){return r(v.a+"/booklist?id="+t)},O=function(t){return r(v.a+"/type?type="+t)},E=function(t,n){return r(v.a+"/book?book="+t+"&id="+n)},T={toggleBar:function(t){(0,t.commit)("TOGGLE_BAR")},showListPanel:function(t){(0,t.commit)("SHOW_LIST_PANEL")},showFontPanel:function(t){(0,t.commit)("SHOW_FONT_PANEL")},fzSizeAdd:function(t){(0,t.commit)("FZ_SIZE_ADD")},fzSizeSub:function(t){(0,t.commit)("FZ_SIZE_SUB")},switchNight:function(t){(0,t.commit)("SWITCH_NIGHT")},prevChapter:function(t){(0,t.commit)("PREV_CHAPTER")},nextChapter:function(t){(0,t.commit)("NEXT_CHAPTER",t.maxChapter)},chooseBook:function(t,n){(0,t.commit)("CHOOSE_BOOK",n)},showBookDetail:function(t,n){(0,t.commit)("SHOW_BOOK_DETAIL",n)},curChapter:function(t,n){(0,t.commit)("CUR_CHAPTER",n)},getBooklist:function(t){var n=t.commit;return S().then(function(t){n("setBooklist",t)})},getBookDetail:function(t,n){var o=t.commit;t.dispatch;return B(n).then(function(t){o("setBookDetail",t);var n=t.like.split("-"),e=n.map(function(t){return B(t)});return Promise.all(e)}).then(function(t){o("setBookRelative",t)})},getBookRelative:function(t,n){t.commit},getBookCategory:function(t,n){var o=t.commit;return O(n).then(function(t){o("setBookCategory",t)})},getBookContent:function(t,n){var o=t.commit,e=(t.dispatch,n.id),i=n.chapter;return E(e,i).then(function(t){o("setBookContent",{title:t.title,content:t.content.split("-")})}).catch(function(t){console.log(t)})}};o(15);a.default.use(b.a);var I=0,w=o(39),A=o(40),y=o.n(A);o(44),o(45);a.default.use(v.b),a.default.use(y.a),a.default.mixin({beforeRouteUpdate:function(t,n,o){var e=this.$options.asyncData;e?e({store:this.$store,route:t}).then(o).catch(o):o()}});var R=function(){var t=e(),n=c();return Object(w.sync)(n,t),{app:new a.default({router:t,store:n,render:function(t){return t(_)}}),router:t,store:n}}(),H=R.app,P=R.router,L=R.store;window.__INITIAL_STATE__&&L.replaceState(window.__INITIAL_STATE__),P.onReady(function(){P.beforeResolve(function(t,n,o){var e=P.getMatchedComponents(t),i=P.getMatchedComponents(n),r=!1,c=e.filter(function(t,n){return r||(r=i[n]!==t)}),a=c.map(function(t){return t.asyncData}).filter(function(t){return t});if(!a.length)return o();Promise.all(a.map(function(n){return n({store:L,route:t})})).then(function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];console.log(n),o()}).catch(o)}),H.$mount("#app")})},19:function(t,n,o){"use strict";var e=o(7),i=o.n(e);i.a},44:function(t,n){},45:function(t,n){},5:function(t,n,o){"use strict";o.d(n,"a",function(){return e});var e="http://localhost:3333";n.b={install:function(t,n){t.prototype.common={defaultImage:function(t){t.target.src="http://www.zwdu.com/files/article/image/20/20962/20962s.jpg"},api:e}}}},7:function(t,n){}},[16]);
//# sourceMappingURL=app.d44405f0ebe1d082448d.js.map